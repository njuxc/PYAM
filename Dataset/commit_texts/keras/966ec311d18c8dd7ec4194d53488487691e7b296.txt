Fix learning_phase int check (#5749)

